(function(b){var k=window.AmazonUIPageJS||window.P,n=k._namespace||k.attributeErrors,a=n?n("AmazonRushRouter",""):k;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,k,n){b.when("A").register("rush-routable-application-base",function(a){return a.createClass({init:function(a){this.applicationName=a},name:function(){return this.applicationName},unload:function(a){return{}},load:function(a,E){return!0}})});"use strict";b.when("A").register("rush-router-html5-history-support",
function(a){var h=a.$.extend;return function(a){function v(d,a,h){a=h.match(a);return{major:d&&a&&a[1]?parseInt(a[1],10):-1,minor:d&&a&&a[2]?parseInt(a[2],10):-1}}function b(d){if(!d||!d.url&&!d.state)return!1;g.replaceState(h({},g.state(),d.state),g.title(),d.url);return!0}var g=a||{userAgent:k.navigator.userAgent,pushState:function(d,a,h){k.history.pushState(d,a,h)},replaceState:function(a,h,g){k.history.replaceState(a,h,g)},title:function(){return document.title},state:function(){return k.history.state},
addStateChangeHandler:function(a){k.addEventListener("popstate",a,!1)},removeStateChangeHandler:function(a){k.removeEventListener("popstate",a)},hasNativeHistorySupport:function(){return k.history&&k.history.replaceState}};return{isSupportedBrowser:function(){var a=g.userAgent,h=/iPhone|iPad|iPod/.test(a),k=-1!==a.indexOf("Android"),b=v(h,/OS ([0-9]+)(?:_([0-9]+))?/,a),a=v(k,/Android ([0-9]+)(?:\.([0-9]+))?/,a);return g.hasNativeHistorySupport()&&!(h&&5>b.major)&&!(k&&4>a.major)&&!(k&&4===a.major&&
2>a.minor)},to:function(a){if(!a||!a.url&&!a.state)return!1;g.pushState(h({},a.state||{}),g.title(),a.url);return!0},replace:b,back:function(){g.history.back()},state:function(a){a&&b({state:a});return g.state()||{}},addStateChangeHandler:g.addStateChangeHandler,removeStateChangeHandler:g.removeStateChangeHandler}}});"use strict";b.when("A").register("rush-router-pattern-parser",function(a){function h(w,c){return c?(a.isArray(c)||(c=[c]),c.concat(a.isArray(w)?w:[w])):w}function k(a){return a.replace(t,
"\\$\x26")}function b(a){return decodeURIComponent((a||"").replace(/\+/g," "))}function n(a){var c="",f=[],h=[],e,l;l=0;var b;e=0;b=[];var m,g,d;for(g=0;g<a.length;g++)m=a[g],d=0===g||0<g&&"\\"!==a[g-1],"{"===m&&d?(e++,b.push(m),1===e&&b.push("\x3c")):("}"===m&&d&&(e--,0===e&&b.push("\x3e")),b.push(m));for(a=b.join("");e=A.exec(a);)e.index!==l&&(h.push(a.slice(l,e.index)),c+=k(a.slice(l,e.index))),e[1]?(l={},e[3]?(c+="("+e[3]+")",b=e[3].match(p),l[e[1]]=b?b.length+1:1):(c+="([^/]+)",l[e[1]]=1),f.push(l)):
"**"===e[0]?(c+="(.*)",f.push({wildcard:1})):"*"===e[0]?(c+="(.*?)",f.push({wildcard:1})):"("===e[0]?c+="(?:":")"===e[0]&&(c+=")?"),h.push(e[0]),l=A.lastIndex;l!==a.length&&(h.push(a.slice(l,a.length)),c+=k(a.slice(l,a.length)));"/"!==a.charAt(0)&&(a="/"+a);"/"!==a.charAt(a.length-1)&&(c+="/?");"*"===h[h.length-1]&&(c+="$");c="^"+c;return{pattern:a,regexpSource:c,regex:new RegExp(c,"i"),paramNames:f,tokens:h}}function g(a){a in x||(x[a]=n(a));return x[a]}function d(w,c){var f={},k=!1,e=g(w),l=c.match(e.regex),
d=null,m;if(l){k=!0;m=l[0];(d=c.substr(m.length))&&"/"===m.charAt(m.length-1)&&(d="/"+d);a.map(l.slice(1),function(a){return b(a)});var x=1;for(m=0;m<e.paramNames.length;m++)a.each(e.paramNames[m],function(a,c){for(var e=0;e<a;e++)f[c]=h(l[x],f[c]),x++})}return{isMatch:k,remainingPathname:d,params:f}}function z(a){var c={},f,d,e;if(!a)return c;"?"===a[0]&&(a=a.slice(1));a=a.split("\x26");for(e=0;e<a.length;e++)f=a[e].split("\x3d"),d=b(f.shift()),f=f.length?b(f.join("\x3d")):null,d&&(c[d]=h(f,c[d]));
return c}var A=/\{<([a-zA-Z_][\w-]*)(:(.+?(?=>\})))?>\}|\*\*|\*|\(|\)/g,t=/[.*+?\^${}()|\[\]\\]/g,p=/(?!\\)(\()/g,x={};return{parsePattern:n,matchPathname:d,parseQueryString:z,matchLocation:function(b,c){var f=d(b,c.pathname),g;if(!1===f.isMatch||f.remainingPathname)return f.isMatch=!1,f;g=z(c.search);a.each(g,function(a,c){f.params[c]=h(a,f.params[c])});return f}}});"use strict";b.when("A").register("rush-route",function(a){return a.createClass({init:function(a,b,k){this.application=function(){return a};
this.pattern=function(){return b};this.handler=function(){return k}}})});"use strict";b.when("A","rush-router-pattern-parser","rush-route","rush-router-html5-history-support","rush-routable-application-base","rush-router-url-parser").register("R",function(a,h,E,v,C,g){function d(a){return"function"===typeof a}function z(a){var b=document.createElement("a");b.href=a.href;b.setAttribute("href",b.href);return b.protocol+"//"+b.host}function A(){return document.location}function t(a,v){function c(a,c){var b,
h,d;d=(c=c||r)&&c.name();if(c&&(b=e(a,d)))return{route:b.route,params:b.params};for(h in u)if(h!==d&&u.hasOwnProperty(h)&&(b=e(a,h)))return{route:b.route,params:b.params};return!1}function f(a,b,h){var d;if(!0===B)return!1;a=a||q();d=c(a,r);if(!1!==d)return l(d.route,d.params,a,h,b);!1!==b&&m(a.href);return!1}function p(a){f(n,n,a)}function e(a,c){var b=u[c],d=!1,e,f,g;for(g=0;g<b.length;g++)if(e=b[g],f=h.matchLocation(e.pattern(),a),f.isMatch){f.route=e;d=f;break}return d}function l(a,c,b,d,h){d=
a.application();return r!==d&&!1===t(b,d)?!1:!1===a.handler().call(b,c,b)?(!1!==h&&m(b.href),!1):!0}function t(a,c){var b,d=null!==r&&r!==c;if(d&&(b=r.unload(a),!1===b))return m(a.href),!1;r=c;if(!1===c.load(a,b)){if(d)m(a.href);else throw Error("FATAL: Router: app.load() failed on startup.");return!1}return!0}function m(a){q().href===a?q().reload(!0):q().href=a}function F(c){if(!0!==B&&!(1!==c.which||c.metaKey||c.ctrlKey||c.shiftKey||c.defaultPrevented)){for(var b=c.target,d=q().href;b&&"A"!==b.nodeName;)b=
b.parentNode;!b||"A"!==b.nodeName||!b.hasAttribute("href")||b.hasAttribute("download")||"off"===b.getAttribute("data-routing")||b.target&&"_self"!==b.target||!(d=C===z(b)&&b.href!==d&&b.href.split("#")[0]!==d.split("#")[0])||(d=f(b,!1),!0===d&&(a.to({url:b.href,state:null}),c.preventDefault()))}}var q=v||A,D={},u={},r=null,C=z(q()),y=!1,B=!1;return{addRoute:function(a,b,h){if(!(a&&d(a.name)&&d(a.load)&&d(a.unload)))throw Error("First argument passed to Router.addRoute must be an application object.");
var e=a.name(),f=D[e],g=u[e];if(!e)throw Error("Application name must not be empty.");if(f&&f!==a)throw Error("An application named `"+e+"` already exists.");f||(D[e]=a);g||(u[e]=[]);a=new E(a,b,h);u[e].push(a);y&&(e=c(q(),r),!1!==e&&e.route===a&&l(e.route,e.params,q(),!1))},removeRoute:function(a){if(a&&a.application&&a.application().name){var b=a.application().name(),b=u[b];if(!b||!b.length)return!1;for(var c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1}},route:p,to:function(b){var c;
b&&b.url&&(c=g.parse(b.url));!0===f(c)&&a.to(b)},replace:function(b){var c;b&&b.url&&(c=g.parse(b.url));!0===f(c,n,!0)&&a.replace(b)},back:a.back,state:a.state,switchApp:function(a){a=D[a];r&&a&&(t(q(),a),f())},start:function(){y||(y=!0,b.when("load").execute("routerBindStateChangeHandler",function(){y&&a.addStateChangeHandler(p)}),k.addEventListener("click",F,!1),f(n,!1))},stop:function(){y&&(a.removeStateChangeHandler(p),k.removeEventListener("click",F,!1),y=!1)},pause:function(){B=!0},unpause:function(){B=
!1}}}var p={};a.mixin(p,t(new v));p.createRouter=t;p.ApplicationBase=C;return p});"use strict";b.register("rush-router-url-parser",function(){var a="protocol hostname host pathname port search hash href".split(" ");return{parse:function(b){var k=document.createElement("a"),n={};k.href=b;k.href=k.href;for(b=0;b<a.length;b++)"pathname"===a[b]?n.pathname=k.pathname.replace(/(^\/?)/,"/"):n[a[b]]=k[a[b]];return n}}})});